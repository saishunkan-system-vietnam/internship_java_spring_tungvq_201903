<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ssv.template.data.mapper.ProjectMapper">
	<insert id="insertProject" parameterType="Project" >
        INSERT INTO Project (NAMEPROJECT) VALUES (#{nameproject});
    </insert>
 
    <update id="updateProject" parameterType="Project">
        UPDATE Project SET NAMEPROJECT = #{nameproject} WHERE ID = #{id};
        UPDATE Project SET STARTDATE = #{startdate} WHERE ID = #{id};
        UPDATE Project SET ENDDATE = #{enddate} WHERE ID = #{id};
     
    </update>
     
    <delete id="deleteProjectById" parameterType="int">
        DELETE from Project WHERE ID = #{id};
    </delete>
    
    <select id="selectProjectById" parameterType="int">
    	SELECT * FROM Project WHERE ID = #{id};
    </select>
    
    <resultMap id = "result" type = "Project"></resultMap>
    <select id="findByNameContaining" parameterType="string" resultMap="result">
  			SELECT * FROM Project WHERE nameproject like '%'||#{a}||'%'
  			<if test="b != null and b != ''">
				AND to_char(startdate, 'YYYY-MM-DD') > #{b} 
			</if>
			<if test="c != null and c != ''">
				and #{c} > to_char(enddate, 'YYYY-MM-DD')
			</if>
	</select>
    
 	<resultMap id = "result1" type = "Project"></resultMap>
    <select id="findByDateContaining" parameterType="string" resultMap="result1">
  			SELECT * FROM Project WHERE to_char(startdate, 'YYYY-MM-DD') = #{b} 
	</select>
    
   
	
</mapper>
